\section{Commutative Linear Algebraic Groups}





\subsection{Some Linear Algebra}


\begin{lemma}
  Let~$g, h \colon V \to V$ be two endomorphisms of a~{\kvs}~$V$ which commute with each other.
  Then the eigenspaces of~$g$ are~\dash{$h$}{invariant}.
\end{lemma}


\begin{proof}
  If~$v \in V$ is an eigenvector of~$g$ for the eigenvalue~$\lambda \in k$ then it follows that
  \[
      g(h(v))
    = h(g(v))
    = h(\lambda v)
    = \lambda h(v) \,.
  \]
  This shows that~$h(v)$ is again contained in the~\dash{$\lambda$}{eigenspace} of~$g$.
\end{proof}


\begin{corollary}
  \label{existence of common eigenvector}
  If~$V$ is a {\fd} nonzero~{\kvs} and~$\mc{G} \subseteq \End_k(V)$ is a set of pairwise commuting endomorphisms then there exists a common eigenvector vor~$\mc{G}$, i.e.\ a nonzero vector~$v \in V$ such that~$v$ is an eigenvector for every~$g \in \mc{G}$.
\end{corollary}


\begin{proof}
  We may assume that~$\mc{G}$ is finite:
  If~$v$ is a common eigenvector for~$g_1, \dotsc, g_n \in \mc{G}$ then~$v$ is a common eigenvector for all~$g \in \gen{ g_1, \dotsc, g_n }_k$.
  We may choose~$g_1, \dotsc, g_n \in \mc{G}$ with~$\gen{g_1, \dotsc, g_n}_k = \gen{\mc{G}}_k$ because~$\End_k(V)$ is {\fd}, for which it then follows that~$v$ is a common eigenvector for all~$g \in \mc{G}$.
  
  We now show the claim for~$\mc{G} = \{g_1, \dotsc, g_n\}$ by induction over~$n$.
  It holds for~$n = 1$ (because~$k$ is algebraically closed).
  

  For~$n \geq 2$ let~$\lambda$ be an eigenvalue for~$g_n$ (which exists because because~$k$ is algebraically closed).
  The eigenspace~$V_\lambda(g_n)$ is then a subspace of~$V$ which is invariant under~$g_1, \dotsc, g_{n-1}$ and it follows from the induction hypothesis that there exists a common eigenvector~$v \in V_\lambda(g_n)$ for~$g_1, \dotsc, g_{n-1}$.
  This is then also an eigenvector for~$g_n$.
\end{proof}


\begin{corollary}
  \label{simultaneously triagbar}
  Let~$V$ be a {\fd}~{\kvs} and let~$\mc{G} \subseteq \End_k(V)$ be a set of pairwise commuting endomorphisms.
  Then there exists a basis~$V$ which respect to which~$\mc{G}$ is given by upper triangular matrices.
\end{corollary}


\begin{proof}
  We show the claim by induction over~$n \defined \dim(V)$.
  It holds for~$n = 0$ so let~$n \geq 1$.
  
  It follows from \cref{existence of common eigenvector} that there exists a common eigenvector~$v \in V$ for~$\mc{G}$.
  Every~$g \in \mc{G}$ induces an endomorphism~$\induced{g} \colon V/\gen{v} \to V/\gen{v}$, and these endomorphism commute pairwise with eath other.
  It follows from the induction hypothesis that there exists~$b_2, \dotsc, b_n \in V$ such that the residue classes~$\class{b_2}, \dotsc, \class{b_n}$ form a basis of~$V/\gen{v}$ with respect to which~$\induced{g}$ is represented by a upper triangular matrix~$A(g)$ for every~$g \in \mc{G}$.
  
  It follows with~$b_1 \defined v$ that~$b_1, \dotsc, b_n$ is a basis of~$V$ with respect to which every~$g \in G$ is given by a matrix of the form
  \[
    \begin{pmatrix}
      \lambda(g)  & *     \\
      0           & A(g)
    \end{pmatrix}
  \]
  where~$\lambda(g)$ is the eigenvalue of~$v$ with respect to~$g$.
\end{proof}


\begin{lemma}
  \label{simultaneous diagbar}
  Let~$V$ be a~{\kvs}.
  \begin{enumerate}
    \item
      \label{simultaneous diagbar for finitely many}
      If~$g_1, \dotsc, g_n \colon V \to V$ are diagonalizable endomorphisms which pairwise commute with each other then they are simultaneously diagonalizable.
    \item
      Let~$V$ be {\fd} and let $\mc{G} \subseteq \End_k(V)$ be a set of commuting diagonalizable endomorphisms.
      Then~$\mc{G}$ is simultaneously diagonalizable, i.e.\ there exists a basis of~$V$ with respect to which~$\mc{G}$ is represented by diagonal matrices.
  \end{enumerate}
\end{lemma}


\begin{proof}
  \leavevmode
  \begin{enumerate}
    \item
      We show the claim by induction over~$n$.
      It holds for~$n = 0$ and~$n = 1$.
      
      Let~$n \geq 2$.
      It follows from the induction hypothesis that~$g_1, \dotsc, g_{n-1}$ are simultaneously diagonalizable, so we may write
      \[
          V
        = \bigoplus_{\lambda_1, \dotsc, \lambda_{n-1}}
          \left(
            V_{\lambda_1}(g_1) \cap \dotsb \cap V_{\lambda_{n-1}}(g_{n-1})
          \right) \,.
      \]
      The summand
      \[
                  V_{\lambda_1}(g_1) \cap \dotsb \cap V_{\lambda_{n-1}}(g_{n-1})
        \defines  V(\lambda_1, \dotsc, \lambda_{n-1})
      \]
      is the simultaneous eigenspace of~$g_1, \dotsc, g_{n-1}$ with respect to the eigenvalues~$\lambda_1, \dotsc, \lambda_{n-1}$.
      The eigenspaces~$V_{\lambda_i}(g_i)$ are~\dash{$g_n$}{invariant} because~$g_n$ commutes with~$g_1, \dotsc, g_{n-1}$.
      The common eigenspace~$V(\lambda_1, \dotsc, \lambda_{n-1})$ is therefore also~\dash{$g_n$}{invariant} because it is the intersection of~\dash{$g_n$}{invariant} subspaces.
      The restriction~$\restrict{g_n}{V(\lambda_1, \dotsc, \lambda_{n-1})}$ is again diagonalizable and so there exists a decomposition
      \[
          V(\lambda_1, \dotsc, \lambda_{n-1})
        = \bigoplus_{\lambda_n} V(\lambda_1, \dotsc, \lambda_{n-1})_{\lambda_n}(g_n)
      \]
      into~\dash{$g_n$}{eigenspaces}.
      This then results overall in a decomposition of common eigenspaces
      \[
          V
        = \bigoplus_{\lambda_1, \dotsc, \lambda_{n-1}}
          \bigoplus_{\lambda_n}
          V(\lambda_1, \dotsc, \lambda_{n-1})_{\lambda_n}(g_n)
        = \bigoplus_{\lambda_1, \dotsc, \lambda_n}
          V_{\lambda_1, \dotsc, \lambda_n}(g_1, \dotsc, g_n) \,.
      \]
      This shows that~$g_1, \dotsc, g_n$ are again simultaneously diagonalizable.
    \item
      The subspace~$\gen{ \mc{G} }_k \subseteq \End_k(V)$ is finite because~$\End_k(V)$ is finite.
      It follows that there exist~$g_1, \dotsc, g_n \in \mc{G}$ with~$\gen{ \mc{G} }_k = \gen{g_1, \dotsc, g_n}_k$.
      The endomorphisms~$g_1, \dotsc, g_n$ are simultaneously diagonalizable by part~\ref*{simultaneous diagbar for finitely many} and so there exists a basis~$B$ of~$V$ with respect to which every~$g_i$ is represented by a diagonal matrix.
      It then follows that every endomorphism~$g \in \gen{ \mc{G} }_k$ is given by a diagonal matrix with respect to~$B$, and this holds in particular every endomorphism~$g \in \mc{G}$.
    \qedhere
  \end{enumerate}
\end{proof}





\subsection{Decomposition of Commutative Linear Algebraic Groups}


\begin{corollary}
  \label{embedding for comm lag}
  If~$G$ is a commutative linear algebraic group then there exists for suitable~$n$ a closed embedding~$G \inclusion \Triag_n(k)$ of linear algebraic groups for which~$G_s$ is given by diagonal matrices, and~$G_s$ is therefore given by~\enquote{$G \cap \Diag_n(k)$}.
\end{corollary}


% TODO: Properly define (closed) embeddings.


\begin{proof}
  We may assume that~$G$ is a subgroup of some~$\GL(V)$ for a {\fd}~{\kvs}~$V$.
  
  The set~$G_s$ is simultaneously diagonalizable by \cref{simultaneous diagbar} so there exists a decomposition~$V = \bigoplus_i V_i$ into common eigenspaces for~$G_s$.
  Every common eigenspace~$V_i$ is~\dash{$G$}{invariant} because it is of the form~$V_i = \bigcap_{g \in G_s} V_{\lambda_{i,g}}(g)$ for scalars~$\lambda_{i,g} \in k$, with each eigenspace~$V_{\lambda_{i,g}}(g)$ being~\dash{$G$}{invariant} since~$G$ is commutative.
  
  It follows from \cref{simultaneously triagbar} that for every~$V_i$ there exists a basis~$B_i$ with respect to which every restriction~$\restrict{g}{V_i}$ is given by an upper triangular matrix.
  For the semisimple elements~$g \in G_s$ the restrictions~$\restrict{g}{V_i}$ are by construction given by scalar matrices with respect to~$B_i$ (and more generally with respect to any basis of~$V_i$).
  By combining the bases~$B_i$ we arrive at a basis~$B$ for~$V$ with respect to which every~$g \in G$ is given by an upper triangular matrix and every~$g \in G_s$ is already given by a diagonmal matrix.
  
  That~$G_s$ is given by~\enquote{$G \cap \Diag_n(k)$} follows from every element of~$G_s$ being given by a diagonal matrix, and every element of~\enquote{$G \cap \Diag_n(k)$} being semisimple.
\end{proof}


\begin{theorem}
  Let~$G$ be a commutative linear algebraic group.
  Then~$G_s$ and~$G_u$ are closed subgroups of~$G$ and the map
  \[
            G_s \times G_u
    \to     G \,,
    \quad   (g_s, g_u)
    \mapsto g_s g_u
  \]
  is an isomorphism of linear algebraic groups.
\end{theorem}


\begin{proof}
  By \cref{embedding for comm lag} we may assume that~$G$ is a closed subgroup of~$\Triag_n(k)$ for some~$n$ such that~$G_s$ is given by~$G_s = G \cap \Diag_n(k)$.
  
  This description of~$G_s$ shows that~$G_s$ is closed in~$G$, and~$G_u$ is closed in~$G$ by \cref{Gu is closed}.
  
  The maps~$(-)_s, (-)_u \colon G \to G$ are group homomorphisms by \cref{multiplicativity of abstract jcd} because~$G$ is commutative.
  It follows that~$G_s$ and~$G_u$ are subgroups of~$G$ and that the map
  \[
            \psi
    \colon  G
    \to     G_s \times G_u \,,
    \quad   g
    \mapsto (g_s, g_u)
  \]
  is a group homomorphism.
  That the given map~$\varphi \colon G_s \times G_u \to G$ is a group homomorphism follows from~$G$ being commutative.
  
  It holds that~$\varphi \psi = \id_G$ because~$g = g_s g_u$ for every~$g \in g$, and it holds that~$\psi \varphi = \id_{G_s \times G_u}$ because for every~$g \in G$ the decomposition~$g = g_s g_u$ is the {\JCD} of~$g$ because~$g_s$ and~$g_u$ commute with each other by the commutativity of~$G$.
  
  The map~$\varphi$ is a morphism of affine varieties because it is given by matrix multiplication, and the map~$\psi$ is a morphism of affine varieties because both~$g_s$ and~$g_u$ are polynomials in~$g$ by \cref{mjcd}.
\end{proof}


\begin{corollary}
  If a commutative linear algebraic group~$G$ is connected then the subgroups~$G_s$ and~$G_u$ are again connected.
\end{corollary}


\begin{proof}
  Both~$G_s$ and~$G_u$ are images of~$G$ under the continuous maps~$(-)_s$ and~$(-)_u$.
\end{proof}





\subsection{Diagonalizable Linear Algebraic Groups}


\begin{definition}
  A linear algebraic group~$G$ is \emph{diagonalizable}\index{diagonalizable lin.\ alg.\ group} if it is isomorphic to a closed subgroup of some~$\Diag_n(k) \cong \Gmult^n$.
  It is a torus if~$G \cong \Diag_n(k) \cong \Gmult^n$ for some~$n$.
\end{definition}


\begin{lemma}
  For a linear algebraic group~$G$ the following conditions are equivalent:
  \begin{enumerate}
    \item
      \label{diagbar}
      $G$ is a diagonalizable.
    \item
      \label{commutative and consists of ss}
      $G$ is commutative with~$G = G_s$.
  \end{enumerate}
\end{lemma}


\begin{proof}
  \leavevmode
  \begin{description}
    \item[\ref*{diagbar}~$\iff$~\ref*{commutative and consists of ss}]
      The group~$\Diag_n(k)$ is commutative and every element of~$\Diag_n(k)$ is semisimple, so the same follows for every of its closed subgroups.
    \item[\ref*{commutative and consists of ss}~$\iff$~\ref{diagbar}]
      This follows from \cref{embedding for comm lag}.
    \qedhere
  \end{description}
\end{proof}


\begin{proof}
  A linear algebraic group~$G$ is a \emph{torus}\index{torus} if it is isomorphic to~$\Diag_n(k) \cong \Gmult^n$ for some~$n$.
\end{proof}


\begin{definition}
  A \emph{character}\index{character!of a group}\index{group!character} of a group~$G$ (over the field~$k$) is a group homomorphism~$\chi \colon G \to k^\times$.
\end{definition}


\begin{lemma}[Dedekind\nobreakdash--Artin]
  \label{dedekind artin lemma}
  For any group~$G$ the set of characters~$G \to k$ is linearly independent in~$\Maps(G,k)$.
\end{lemma}


\begin{proof}
  We show that pairwise different characters~$\chi_1, \dotsc, \chi_n \colon G \to k^\times$ are linearly independent by induction over~$n$.
  The linear independence holds for~$n = 0$ and it holds for~$n = 1$ because every character is nonzero (as it maps~$1 \in G$ onto~$1 \in k^\times$).
  
  Let~$n \geq 2$ and let~$\lambda_1 \chi_1 + \dotsb + \lambda_n \chi_n = 0$ be a linear combination.
  It holds for all~$g, h \in G$ that
  \begin{gather}
    \notag
      0
    = \lambda_1 \chi_1(gh) + \dotsb + \lambda_n \chi_n(gh)
    = \lambda_1 \chi_1(g) \chi_1(h) + \dotsb + \lambda_n \chi_n(g) \chi_n(h)
  \intertext{and therefore}
    \label{first relation}
      0
    = \lambda_1 \chi_1(g) \chi_1 + \dotsb + \lambda_n \chi_n(g) \chi_n \,.
  \end{gather}
  It also holds that
  \begin{equation}
    \label{second relation}
      0
    = \chi_n(g) \cdot (\lambda_1 \chi_1 + \dotsb + \lambda_n \chi_n)
    = \lambda_1 \chi_n(g) \chi_1 + \dotsb + \lambda_n \chi_n(g) \chi_n \,.
  \end{equation}
  By subtracting the relation~\eqref{second relation} from the relation~\eqref{first relation} it follows that
  \[
      0
    =   \lambda_1 \left( \chi_1(g) - \chi_n(g) \right) \chi_1
      + \dotsb
      + \lambda_{n-1} (\chi_{n-1}(g) - \chi_n(g)) \chi_{n-1} \,.
  \]
  
  It follows from the induction hypothesis that for every~$i = 1, \dotsc, n-1$,~$\lambda_i = 0$ or~$\chi_i(g) = \chi_n(g)$.
  There exists for every~$i = 1, \dotsc, n$ some~$g \in G$ with~$\chi_i(g) \neq \chi_n(g)$ because~$\chi_i$ and~$\chi_n$ are distinct.
  It follows in combination that~$\lambda_1 = \dotsb = \lambda_{n-1} = 0$.
  It then also follows that~$\lambda_n = 0$ because~$\lambda_n \chi_n = 0$.
\end{proof}


\begin{definition}
  A \emph{rational character}\index{rational character}\index{character!rational} of a linear algebraic group~$G$ is a morphism of linear algebraic groups~$\chi \colon G \to \Gmult$.
  The \emph{character group}\index{character!group}\index{group!character} is
  \[
              {\chargroup(G)}
    \defined  \left\{
                \, \chi \colon G \to \Gmult
              \suchthat
                \text{$\chi$ is a rational characters}
              \right\} \,.
  \]
\end{definition}


\begin{remark}
  Other common notations for the character group of a linear algebraic group~$G$ are~$\widehat{G}$ and~$\chi(G)$.
\end{remark}


\begin{fluff}
  The character group~$\chargroup(-)$ defines a contravariant functor
  \begin{align*}
    \left\{
      \text{linear algebraic groups}
    \right\}
    &\longto
    \left\{
      \text{abelian groups}
    \right\} \,,
    \\
                  G
    &\longmapsto  \chargroup(G) \,,
    \\
                  [f \colon G \to H]
    &\longmapsto  \bigl[
                            f^*
                    \colon  \chargroup(H)
                    \to     \chargroup(G),
                            \chi
                    \mapsto \chi \circ f \,
                  \bigr] \,.
  \end{align*}
\end{fluff}


\begin{lemma}
  For every linear algebraic group~$G$ its character group~$\chargroup(G)$ is a subgroup of the unit group~$\coord(G)^\times$.
  \qed
\end{lemma}


\begin{lemma}
  If~$G$ is a linear algebraic group and~$\ringchar(k) = p > 0$ then the character group~$\chargroup(G)$ has only trivial~\dash{$p$}{torsion}.
\end{lemma}


\begin{proof}
  If~$\ringchar(k) = p > 0$ then it holds for every~$x \in \Gmult$ that
  \[
      x^p - 1
    = (x - 1)^p
  \]
  and it therefore therefore holds that~$x^p = 1$ if and only if~$x = 1$.
  This shows that the multiplicative group~$\Gmult$ has only trivial~\dash{$p$}{torsion}.
  It follows that0for every linear algebraic group~$G$ its character group~$\chargroup(G)$ has only trivial~\dash{$p$}{torsion}.
  This shows 
\end{proof}


\begin{lemma}
  \label{units of laurant polynomials}
  Let~$R$ be an integral domain.
  Then the unit group of the ring of Laurant polynomials~$R[t,t^{-1}]$ is given by~$R[t,t^{-1}]^\times = \{ a t^n \suchthat a \in R^\times, n \in \Integer\}$.
\end{lemma}


\begin{proof}
  For every nonzero Laurant polynomial~$p = \sum_{i \in \Integer} p_i t^i \in k[t,t^{-1}]$ its \emph{lower degree} is given by
  \[
              \deg^-(p)
    \defined  \min \{ i \in \Integer \suchthat p_i \neq 0 \}
  \]
  and its \emph{upper degree} is given by
  \[
              \deg^+(p)
    \defined  \max \{ i \in \Integer \suchthat p_i \neq 0 \} \,.
  \]
  It holds that~$\deg^-(p) \leq \deg^+(p)$ with equality if and only if~$p$ is of the form~$p = a t^n$ for some nonzero~$a \in R$ and some~$n \in \Integer$.
  
  It follows from~$R$ being an integral domain that both~$\deg_-$ and~$\deg_+$ are additive in the sense that
  \[
    \deg_\pm(p_1 p_2) = \deg_\pm(p_1) + \deg_\pm(p_2)
  \]
  for any two nonzero Laurant polynomials~$p_1, p_2 \in R[t, t^{-1}]$.
  
  If~$p \in R[t, t^{-1}]$ is a unit with inverse~$q \in R[t, t^{-1}]$ then it follows that
  \[
      \deg^+(p) + \deg^+(q)
    = \deg^+(pq)
    = \deg^+(1)
    = 0
  \]
  and therefore that~$\deg^+(p) = -\deg^+(q)$.
  It follows similarly that~$\deg^-(p) = -\deg^-(q)$.
  This shows together with~$\deg^-(q) \leq \deg^+(q)$ that
  \[
          \deg^+(p)
    =     - \deg^+(q)
    \leq  - \deg^-(q)
    =     \deg^-(p) \,,
  \]
  which together with~$\deg^-(p) \leq \deg^+(p)$ shows that~$\deg^-(p) = \deg^+(p)$.
  The Lauraunt polynomial~$p$ is therefore of the form~$p = a t^n$ for some~$a \in R$,~$n \in \Integer$.
  By switching the roles of~$p$ and~$q$ it also follows that~$q$ is of the form~$q = b t^m$ for some~$b \in R$, $m \in \Integer$.
  
  It follows from~$p$ and~$q$ being inverse to each other that~$m = -n$ and that~$a, b \in R^\times$ with~$b = a^{-1}$.
\end{proof}


\begin{lemma}
  \label{structure theory for Dn}
  It holds for the group of diagonal matrices~$\Diag_n(k)$ that
  \begin{gather*}
      \coord(\Diag_n(k))
    = k[T_1, T_1^{-1}, \dotsc, T_n, T_n^{-1}]
  \shortintertext{where}
      T_i
      \left(
        \begin{pmatrix}
          d_1 &         &     \\
              & \ddots  &     \\
              &         & d_n
        \end{pmatrix}
      \right)
    = d_i \,,
  \end{gather*}
  for every~$i$, and it holds that
  \begin{align*}
          \coord\bigl( \Diag_n(k) \bigr)^\times
    &=    \bigcup_{\mindex{a} \in \Integer^n} k^\times T_1^{a_1} \dotsm T_n^{a_n}
    \cong k^\times \times \Integer^n \,,
  \shortintertext{and}
          \chargroup\bigl( \Diag_n(k) \bigr)
    &=    \bigcup_{\mindex{a} \in \Integer^n} T_1^{a_1} \dotsm T_n^{a_n}
    \cong \Integer^n \,.
  \end{align*}
  It holds in particular that~$\chargroup( \Diag_n(k) )$ is a~\dash{$k$}{basis} of~$\coord( \Diag_n(k) )$.
\end{lemma}


\begin{proof}
  It holds that
  \begin{align*}
           &  \coord(\Diag_n(k)) \\
        ={}&  \coord(\Gmult \times \dotsb \times \Gmult)  \\
    \cong{}&  \coord(\Gmult) \tensor \dotsb \tensor \coord(\Gmult) \\
        ={}&  k\left[ T_1, T_1^{-1} \right]
              \tensor \dotsb \tensor
              k\left[ T_n, T_n^{-1} \right]  \\
    \cong{}&  k\left[ T_1, T_1^{-1}, \dotsc, T_n T_n^{-1} \right]
  \end{align*}
  as claimed.
  This equality~$\coord(\Diag_n(k))^\times = \bigcup_{\mindex{a} \in \Integer^n} k^\times T_1^{a_1} \dotsm T_n^{a_n}$ follows from \cref{units of laurant polynomials} by induction over~$n$ on
  \[
      k\left[ T_1, T_1^{-1}, T_2, T_2^{-1}, \dotsc, T_n, T_n^{-1} \right]
    = k\left[ T_1, T_1^{-1} \right]
       \left[ T_2, T_2^{-1} \right]
       \dotsm
       \left[ T_n, T_n^{-1} \right] \,.
  \]
  
  The inclusion~$\bigcup_{\mindex{a} \in \Integer^n} T_1^{a_1} \dotsm T_n^{a_n} \subseteq \chargroup(\Diag_n(k))$ holds because every~$T_i \colon \Diag_n(k) \to \Gmult$ is a homomorphism of linear algebraic groups (namely the projection of~$\Diag_n(k) = \Gmult^n$ onto the~\dash{$i$}{th} factor).
  To convince ourselves of the inclusion~$\chargroup(\Diag_n(k)) \subseteq \bigcup_{\mindex{a} \in \Integer^n} T_1^{a_1} \dotsm T_n^{a_n}$ we note that every~$\chi \in \chargroup(\Diag_n(k))$ is a unit in~$\coord(\Diag_n(k))^\times$ and thus of the form~$\chi = \lambda T_1^{a_1} \dotsm T_n^{a_m}$ for some scalar~$\lambda \in k^\times$ and some multiindex~$\mindex{a} \in \Integer^n$.
  It holds that
  \[
    1 = \chi(1) = \lambda
  \]
  and therefore that~$\chi = T_1^{a_1} \dotsm T_n^{a_n}$.
\end{proof}


\begin{theorem}[Structure of diagonalizable groups]
  For a linear algebraic group~$G$ the following conditions are equivalent:
  \begin{enumerate}
    \item
      \label{G is diagonalizable}
      The group $G$ is diagonalizable.
    \item
      \label{X(G) is nice}
      The character group~$\chargroup(G)$ is finitely generated and a \dash{$k$}{basis} of~$\coord(G)$.
    \item
      \label{G is product of things}
      It holds that~$G \cong \mu_{d_1} \times \dotsb \times \mu_{d_n} \times \Diag_r(k)$ where~$\mu_d \defined \{g \in \Gmult \suchthat g^d = 1\}$ is the group of the~\dash{$d$}{th} roots of unity, such that~$p \ndivides d_i$ for every~$i$.
  \end{enumerate}
\end{theorem}


\begin{proof}
  The proof proceeds in six steps.
  \begin{enumerate}[label = Step~\arabic*]
    \item
      Let~$G$ be a diagonalizable linear algebraic group and let~$i \colon G \inclusion \Diag_n(k)$ be a closed embedding for suitable~$n$.
      The induced algebra homomorphism~$i^* \colon \coord(\Diag_n(k)) \to \coord(G)$ is then a surjection (for example by \cref{induced is isomorphism or surjective}) and we have the following commutative diagram:
      \[
        \begin{tikzcd}
            \coord(\Diag_n(k))
            \arrow{r}[above]{i^*}
          & \coord(G)
          \\
            \chargroup(\Diag_n(k))
            \arrow{r}[above]{i^*}
            \arrow[hook]{u}
          & \chargroup(G)
            \arrow[hook]{u}
        \end{tikzcd}
      \]
      It follows from \cref{structure theory for Dn} that~$\chargroup(\Diag_n(k))$ is a~\dash{$k$}{basis} of~$\coord(\Diag_n(k))$, from which it then follows with the surjectivity of~$i^* \colon \coord(\Diag_n(k)) \to \coord(G)$ and the commutativity of the diagram that~$\coord(G)$ is generated by~$\chargroup(G)$ as a~\dash{$k$}{vector space}.
      It follows that the set~$\chargroup(G)$ is a~\dash{$k$}{basis} for~$\coord(G)$ because it is linearly independent by the \hyperref[dedekind artin lemma]{Dedekind\nobreakdash--Artin lemma}.
      
      This shows the implication \ref*{G is diagonalizable}~$\implies$~\ref*{X(G) is nice}.
      
    \item
      \label{every character a restriction}
      Note that in the above situation the image~$i^*(\chargroup(\Diag_n(k)))$ is is a~\dash{$k$}{generating} set of~$\coord(G)$ (because~$\chargroup(\Diag_n(k))$ is a~\dash{$k$}{basis} for~$\coord(\Diag_n(k))$ and the algebra homomorphism~$i^* \colon \coord(\Diag_n(k)) \to \coord(G)$ is surjective).
      This image is contained in the~\dash{$k$}{basis}~$\chargroup(G)$ of~$\coord(G)$, from which it follows that~$i^*(\chargroup(\Diag_n(k))) = \chargroup(G)$, i.e.\ that~$i^*$ is surjective.
      This shows that every character of~$G$ is the restriction of a character of~$\Diag_n(k)$.
    
    \item
      \label{fullly faithful}
      Let~$G$ be any linear algebraic groups and~$H$ is a diagonalizable linear algebraic group then the map
      \[
                  \varepsilon
        \defined  (-)^*
        \colon    \Hom_{\,\text{lin.\ alg.\ groups}\,}(G, H)
        \to       \Hom_{\Ab}( \chargroup(H), \chargroup(G) )
      \]
      is bijective.
      
      To see that the map~$\varepsilon$ is injective we note that we have for every homomorphism of linear algebraic groups~$f \colon G \to H$ the following commutative diagram:
      \[
        \begin{tikzcd}
            \coord(H)
            \arrow{r}[above]{f^*}
          & \coord(G)
          \\
            \chargroup(H)
            \arrow{r}[above]{f^*}
            \arrow[hook]{u}
          & \chargroup(G)
            \arrow[hook]{u}
        \end{tikzcd}
      \]
      The homomorphism~$f$ is uniquely determined by the induced algebra homomorphism~$f^* \colon \coord(H) \to \coord(G)$ (because~$\coord(-)$ is faithful), which in turn is uniquely determined by its action on the~\dash{$k$}{basis}~$\chargroup(H)$ of~$\coord(H)$.
      This action is given by th induced group homomorphism~$\varepsilon(f) = f^* \colon \chargroup(H) \to \chargroup(G)$, which shows that~$\varepsilon$ is injective.
      
      To show that~$\varepsilon$ is surjective let~$f \colon \chargroup(H) \to \chargroup(G)$ be a group homomorphism.
      It follows from~$\chargroup(H)$ being a basis of~$\coord(H)$ that~$\chi$ extends uniquely to a~\dash{$k$}{linear} map~$F \colon \coord(H) \to \coord(G)$.
      The map~$F$ is multiplicative on the basis~$\chargroup(H)$ of~$\coord(H)$ and satisfies the equality~$F(1) = \chi(1) = 1$;
      this shows that~$F$ is an algebra homomorphism.
      It follows that there exists a unique morphism of affine varieties~$h \colon G \to H$ with~$F = f^*$.
      This morphim~$h$ is a group homomorphism:
      It holds that
      \begin{align}
            & \text{$h(g_1 g_2) = h(g_1) h(g_2)$ for all~$g_1, g_2 \in G$}  \notag  \\
      \iff{}& \text{$\varphi(h(g_1 g_2)) = \varphi( h(g_1) h(g_2) )$ for all~$g_1, g_2 \in G$,~$\varphi \in \coord(H)$} \notag  \\
      \iff{}& \text{$\chi'(h(g_1 g_2)) = \chi'(h(g_1) h(g_2))$ for all~$g_1, g_2 \in G$,~$\chi' \in \chargroup(H)$}
      \label{replace by basis}
      \,,
      \end{align}
      where the equivalence~\eqref{replace by basis} holds because~$\chargroup(H)$ is a~\dash{$k$}{basis} for~$\coord(H)$.
      The needed equality~$\chi'(f(g_1 g_2)) = \chi'(f(g_1) f(g_2))$ holds true because
      \begin{align}
            \chi'(h(g_1 g_2)) \notag
        &=  h^*\left( \chi' \right)(g_1 g_2) \notag \\
        &=  F(\chi')(g_1 g_2) \notag  \\
        &=  f(\chi')(g_1 g_2) \notag  \\
        &=  f(\chi')(g_1) f(\chi')(g_2) \label{is a group homo}  \\
        &=  F(\chi')(g_1) F(\chi')(g_2) \notag  \\
        &=  h^*(\chi')(g_1) h^*(\chi')(g_2) \notag  \\
        &=  \chi'(h(g_1)) \chi'(h(g_2)) \notag  \\
        &=  \chi'(h(g_1) h(g_2)) \notag \,,
      \end{align}
      where we use for the equality~\eqref{is a group homo} that~$f(\chi') \in \chargroup(G)$ is again a character, and thus a group homomorphism.
      With this we have shown that~$f$ is a group homomorphism, and therefore already a homomorphism of linear algebraic groups.
      It follows from the commutativity of the diagram
      \[
        \begin{tikzcd}
            \coord(H)
            \arrow{r}[above]{F = h^*}
          & \coord(G)
          \\
            \chargroup(H)
            \arrow{r}[above]{f}
            \arrow[hook]{u}
          & \chargroup(G)
            \arrow[hook]{u}
        \end{tikzcd}
      \]
      that~$f = h^* = \varepsilon(h)$, which shows that~$\varepsilon$ is surjective.
      
    \item
      Suppose that~$G$ is a linear algebraic group for which its character group~$\chargroup(G)$ is finitely generated, and a basis of~$\coord(G)$.
      It follows from~$\chargroup(G)$ being finitely generated that there exists for some~$n$ a surjective grouphomorphism~$\Integer^n \to \chargroup(G)$ and thus a surjective grouphomomorphism~$h \colon \chargroup(\Diag_n(k)) \to \chargroup(G)$.
      It then follows from \ref{fullly faithful} that there exists a homomorphism of linear algebraic groups~$f \colon G \to \Diag_n(k)$ with~$h = f^*$.
      
      The homomorphism~$f$ is a closed embedding:
      We consider the following commutative diagram:
      \[
        \begin{tikzcd}
            \coord(\Diag_n(k))
            \arrow{r}[above]{f^*}
          & \coord(G)
          \\
            \chargroup(\Diag_n(k))
            \arrow{r}[above]{h = f^*}
            \arrow[hook]{u}
          & \chargroup(G)
            \arrow[hook]{u}
        \end{tikzcd}
      \]
      The lower horizontral arrow~$f^* \colon \chargroup(\Diag_n(k)) \to \chargroup(G)$ is surjective and~$\chargroup(G)$ is a~\dash{$k$}{basis} of~$\coord(G)$, so it follows that the image of the composition~$\chargroup(\Diag_n(k)) \to \coord(G)$ is a~\dash{$k$}{generating} set of~$\coord(G)$.
      It follows that the induction algebra homomorphism~$f^* \colon \coord(\Diag_n(k)) \to \coord(G)$ is surjective.
      This shows that~$f$ is closed embedding by \cref{induced is isomorphism or surjective}.
      
      This shows the implication \ref*{X(G) is nice}~$\implies$~\ref*{G is diagonalizable}.
      
    \item
      To show the implication \ref*{G is diagonalizable}~$\implies$~\ref*{G is product of things} let~$G$ be a diagonalizable linear algebraic group, which we may assume to be a closed subgroup of some~$\Diag_n(k) \defines T$.
      
      We have seen in \ref{every character a restriction} that every character of~$G$ is the restriction of a character of~$T$, i.e.\ that the group homomorphism~$i^* \colon \chargroup(T) \to \chargroup(G)$ induced by the inclusion~$i \colon G \inclusion T$ is surjective.
      Let~$\Gamma \defined \ker(i^*) \groupleq \chargroup(T)$ be its kernel.
      It then holds that~$G = \bigcap_{\chi \in \Gamma} \ker(\chi)$:
      
      The inclusion~$G \subseteq  \bigcap_{\chi \in \Gamma} \ker(\chi)$ holds by definition of~$\Gamma$.
      To convince ourselves of the other inclusion we note that~$G' \defined \bigcap_{\chi \in \Gamma} \ker(\chi)$ is a closed subgroup of~$T$ for which a character~$\chi \in \chargroup(T)$ is trivial on~$G$ (i.e.\ contained in~$\Gamma$) if and only if it is trivial on~$G'$.
      It follows that both~$G$ and~$G'$ have the same characters, i.e.\ that the inclusion~$j \colon G \inclusion G'$ induces an isomorphism of group~$j^* \colon \chargroup(G') \to \chargroup(G)$, since the characters on~$G$ and~$G'$ are the restrictions of the characters of~$T$ by \ref{every character a restriction}.
      This shows that the induced algebra homorphism~$j \colon \coord(G') \to \coord(G)$ maps the~\dash{$k$}{basis}~$\chargroup(G')$ of~$\coord(G')$ bijectively onto the~\dash{$k$}{basis}~$\chargroup(G)$ of~$\coord(G)$, and is therefore an algebra isomorphism.
      It follows that~$j$ is an isomorphism and therefore that~$G = G'$, as claimed.
      
    \item
      We continue the above line of thought:
      
      
  \end{enumerate}
\end{proof}






