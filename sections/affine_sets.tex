\section{Affine Sets}
\label{affine sets}


\begin{conventions}
  Throughout these notes~$k$ denotes an algebraically closed field.
\end{conventions}


\begin{fluff}
  In this \nameCref{affine sets} we recall the notion of an affine set and some of the basic theorems about them.
  The missing proofs can, for example, be found in the \cite{algebra1notes}
\end{fluff}





\subsection{Definition}


\begin{definition}
  The \emph{affine~\dash{$n$}{space}} over~$k$ is~$\Aff^n \defined \Aff^n_k \defined k^n$.
\end{definition}


\begin{fluff}
  It follows from~$k$ being infinite that~$f = g$ for all~$f, g \in k[x_1, \dotsc, x_n]$ with~$f(x) = g(x)$ for every~$x \in \Aff^n$.
  We will therefore regard the polynomial ring~$k[x_1, \dotsc, x_n]$ as the ring of polynomial functions on~$\Aff^n$.
\end{fluff}


\begin{definition}
  \label{definition of affine sets}
  For every subset~$S \subseteq k[x_1, \dotsc, x_n]$ the set
  \[
              \vset(S)
    \defined  \{
                x \in \Aff^n
              \suchthat
                \text{$f(x) = 0$ for every~$f \in S$}
              \}
  \]
  is the \emph{vanishing locus} of~$S$, or \emph{affine \textup(algebraic\textup) set} given by~$S$.
\end{definition}


\begin{lemma}
  \label{properties of vanishing sets}
  \leavevmode
  \begin{enumerate}
    \item
      It holds for every subset~$S \subseteq k[x_1, \dotsc, x_n]$ that~$\vset(S) = \vset( (S) )$.
    \item
      It holds for all ideals~$I_1 \idealleq I_2 \idealleq k[x_1, \dotsc, x_n]$ that~$\vset(I_1) \supseteq \vset(I_2)$.
    \item
      It holds for all ideals~$I_1, I_2 \idealleq k[x_1, \dotsc, x_n]$ that
      \[
          \vset(I_1) \cup \vset(I_2)
        = \vset(I_1 \cap I_2)
        = \vset(I_1 \cdot I_2) \,.
      \]
    \item
      It holds for every family~$(I_\lambda)_{\lambda \in \Lambda}$ of ideals~$I_\lambda \idealleq k[x_1, \dotsc, x_n]$ that
      \[
          \bigcap_{\lambda \in \Lambda} \vset(I_\lambda)
        = \vset\left( \bigcup_{\lambda \in \Lambda} I_\lambda \right)
        = \vset\left( \sum_{\lambda \in \Lambda} I_\lambda \right) \,.
      \]
    \item
      It holds that~$\vset(1) = \emptyset$.
    \item
      It holds that~$\vset(0) = \Aff^n$.
    \qed
  \end{enumerate}
\end{lemma}


\begin{corollary}
  \label{existence of zariski topology}
  There exists a unique topology on~$\Aff^n$ whose closed subsets are the subsets of the form~$\vset(S)$ for subsets~$S \subseteq k[x_1, \dotsc, x_n]$.
  \qed
\end{corollary}


\begin{definition}
  The topology from \cref{existence of zariski topology} is the \emph{Zariski topology} on~$\Aff^n$.
  The induced subspace topology on a subset~$X \subseteq \Aff^n$ is the \emph{Zariski topology} on~$X$.
\end{definition}


\begin{remark}
  Linear algebra groups are precisely those subgroups of~$\GL_n(k)$ for some~$n$ which are closed with respect to (the subspace topology of~$\GL_n(k)$ induced by) the Zariski topology.
\end{remark}


\begin{theorem}[Hilbert]
  Every ideal~$I \idealleq k[x_1, \dotsc, x_n]$ is finitely generated.
  \qed
\end{theorem}


\begin{corollary}
  It holds for every subset~$S \subseteq k[x_1, \dotsc, x_n]$ that
  \[
      \vset(S)
    = \vset(f_1, \dotsc, f_m)
    = \vset(f_1) \cap \dotsb \cap \vset(f_m) \,.
  \]
  for some finitely many~$f_1, \dotsc, f_m \in S$.
  \qed
\end{corollary}





\subsection{Coordinate Rings}


\begin{definition}
  For every subset~$X \subseteq \Aff^n$ the set
  \[
              \videal(X)
    \defined  \{
                f \in k[x_1, \dotsc, x_n]
              \suchthat
                \text{$f(x) = 0$ for every~$x \in X$}
              \}
  \]
  is the \emph{vanishing ideal} of~$X$.
\end{definition}


\begin{lemma}
  \label{properties of vanishing ideals}
  \leavevmode
  \begin{enumerate}
    \item
      For every subset~$X \subseteq \Aff^n$ the vanishing ideal~$\videal(X)$ is an ideal in~$k[x_1, \dotsc, x_n]$.
    \item
      It holds for all subsets~$X_1 \subseteq X_2 \subseteq \Aff^n$ that~$\videal(X_1) \idealgeq \videal(X_2)$.
    \item
      It holds for every family~$(X_\lambda)_{\lambda \in \Lambda}$ of subsets~$X_\lambda \subseteq \Aff^n$ that
      \[
          \videal\left( \bigcup_{\lambda \in \Lambda} X_\lambda \right)
        = \bigcap_{\lambda \in \Lambda} \videal(X_\lambda) \,.
      \]
    \item
      It holds that~$\videal(\emptyset) = (1) = k[x_1, \dotsc, x_n]$.
    \item
      It holds that~$\videal(\Aff^n) = 0$ (because~$k$ is infinite).
    \qed
  \end{enumerate}
\end{lemma}


\begin{definition}
  The \emph{coordinate ring} of an affine set~$X \subseteq \Aff^n$ is the~\dash{$k$}{algebra}
  \[
              \coord(X)
    \defined  k[x_1, \dotsc, x_n] / {\videal(X)} \,.
  \]
\end{definition}
% TODO:: Make quotients into binary operators.


\begin{fluff}
  For an affine set~$X \subseteq \Aff^n$ any two polyomial functions~$f, g \in k[x_1, \dotsc, x_n]$ coincide on~$X$ in the sense that~$f(x) = g(x)$ for all~$x \in X$ if and only if~$f - g \in \videal(X)$, i.e.\ if and only if~$f$ and~$g$ are identified in~$\coord(X)$.
  We will therefore regard the coordinate ring~$\coord(X)$ as the ring of polynomial functions on~$X$.
  
  We can then define for every ideal~$I \idealleq \coord(X)$ the \emph{vanishing set}
  \[
              \vset(I)
    \defined  \vset_X(I)
    \defined  \{
                x \in X
              \suchthat
                \text{$f(x) = 0$ for every~$f \in I$}
              \}
  \]
  and can define for every subset~$Y \subseteq X$ the \emph{vanishing ideal}
  \[
              \videal(Y)
    \defined  \videal_X(Y)
    \defined  \{
                f \in \coord(X)
              \suchthat
                \text{$f(y) = 0$ for every~$y \in Y$}
              \} \,.
  \]
  For~$X = \Aff^n$ this agrees with the previous definitions of vanishing sets and vanishing ideals.
  The properties from \cref{properties of vanishing sets} and \cref{properties of vanishing ideals} also hold for this more general definitions.
\end{fluff}


\begin{lemma}
  The Zariski closed subsets of an affine set~$X$ are precisely the subsets of the form~$\vset(I)$ with~$I \idealleq \coord(X)$.
  \qedhere
\end{lemma}


\begin{corollary}
  \label{characterization of zariski dense}
  Let~$X$ be an affine set.
  For a subset~$X' \subseteq X$ the following conditions are equivalent:
  \begin{enumerate}
    \item
      The set is Zariski dense in~$X$.
    \item
      It follows for every~$f \in \coord(X)$ from~$\restrict{f}{X'} = 0$ that~$f = 0$.
    \item
      It follows for all~$f, g \in \coord(X)$ from~$\restrict{f}{X'} = \restrict{g}{X'}$ that~$f = g$.
  \end{enumerate}
\end{corollary}


\begin{proof}
  It holds that
  \begin{align*}
        {}& \text{$X'$ is Zariski dense in~$X$}                                                 \\
    \iff{}& \text{if~$C \subseteq X$ is a Zariski closed with~$X' \subseteq C$ then~$C = X$}    \\
    \iff{}& \text{if~$f \in \coord(X)$ with~$X' \subseteq \vset(f)$ then~$\vset(f) = X$}        \\
    \iff{}& \text{if~$f \in \coord(X)$ with~$\restrict{f}{X'} = 0$ then~$f = 0$}                \\
    \iff{}& \text{if~$f, g \in \coord(X)$ with~$\restrict{(f-g)}{X'} = 0$ then~$f-g = 0$}       \\
    \iff{}& \text{if~$f, g \in \coord(X)$ with~$\restrict{f}{X'} = \restrict{g}{X'}$ then~$f = g$}
  \end{align*}
  as claimed.
\end{proof}


\begin{corollary}
  \label{standard basis of zariski topology}
  If~$X$ is an affine set then the sets
  \[
              \Dopen(f)
    \defined  \Dopen_X(f)
    \defined  \{
                x \in X
              \suchthat
                f(x) \neq 0
              \}
  \]
  with~$f \in \coord(X)$ form a basis for the Zariski topology of~$X$.
\end{corollary}



\begin{proof}
  The sets~$\Dopen(f)$ are Zariski open because~$\Dopen(f) = X \setminus \vset(f)$.
  If~$U \subseteq X$ is any Zariski open subset then the complement~$X \setminus U$ is Zariski closed and thus of the form~$X \setminus U = \vset(I)$ for some ideal~$I \idealleq \coord(X)$.
  If~$f_\lambda \in I$,~$\lambda \in \Lambda$ is a generating set of~$I$ then it follows from
  \begin{gather*}
      \vset(I)
    = \vset(f_\lambda \suchthat \lambda \in \Lambda)
    = \bigcap_{\lambda \in \Lambda} \vset(f_\lambda)
  \shortintertext{that}
      U
    = X \setminus \vset(I)
    = X \setminus \bigcap_{\lambda \in \Lambda} \vset(f_\lambda)
    = \bigcup_{\lambda \in \Lambda} \big( X \setminus \vset(f_\lambda) \big)
    = \bigcup_{\lambda \in \Lambda} \Dopen(f_\lambda)
  \end{gather*}
  as desired.
\end{proof}


\begin{definition}
  For an affine set~$X$ the open subsets~$\Dopen(f) \subseteq X$ with~$f \in \coord(X)$ are the \emph{standard open subsets} of~$X$.
\end{definition}


\begin{notation}
  If more generally~$X'$ is any set,~$f \colon X' \to k$ is a function and~$X \subseteq X'$ is a subset then we will use the notation
  \[
              \Dopen_X(f)
    \defined  \{
                x \in X
              \suchthat
                f(x) \neq 0
              \} \,.
  \]
\end{notation}


\begin{definition}
  Let~$R$ be a commutative ring.
  \begin{enumerate}
    \item
      The ring~$R$ is \emph{reduced} if~$0 \in R$ is the only nilpotent element of~$R$.
    \item
      The \emph{radical} of an ideal~$I \idealleq R$ is
      \[
                  \rad{I}
        \defined  \{
                    f \in R
                  \suchthat
                    \text{$f^n \in I$ for some~$n \geq 0$}
                  \} \,.
      \]
    \item
      An ideal~$I \idealleq R$ is \emph{radical} if~$I = \rad{I}$.
  \end{enumerate}
\end{definition}


\begin{lemma}
  Let~$R$ be a commutative ring.
  \begin{enumerate}
    \item
      For every ideal~$I \idealleq R$ its radical~$\rad{I}$ is again an ideal in~$R$.
    \item
      An ideal~$I \idealleq R$ is radical if and only if the quotient~$R/I$ is reduced.
    \qed
  \end{enumerate}
\end{lemma}


\begin{lemma}
  The ideal~$\videal(X) \idealleq k[x_1, \dotsc, x_n]$ is radical for every subset~$X \subseteq \Aff^n$.
  \qed
\end{lemma}


\begin{corollary}
  \label{coordinate ring is fg commutative reduced}
  For every affine set~$X$ its coordinate ring~$\coord(X)$ is a finitely generated, commutative, reduced~\dash{$k$}-algebra.
  \qed
\end{corollary}


\begin{theorem}[Hilbert’s~Nullstellensatz, version~1]
  \label{nullstellensatz 1}
  If~$X$ is an affine set then holds for every ideal~$I \idealleq \coord(X)$ that~$\videal( \vset( I ) ) = \rad{I}$.
  \qed
\end{theorem}


\begin{theorem}[Hilbert’s~Nullstellensatz, version~2]
  \label{nullstellensatz 2}
  If~$X$ is an affine set and~$I \ideallneq \coord(X)$ is a proper ideal then its vanishing set~$\vset(I)$ is nonempty.
  \qed
\end{theorem}



\subsection{Irreducibility}


\begin{definition}
  Let~$X$ be a topological space.
  \begin{enumerate}
    \item
      The space~$X$ is \emph{reducible} if~$X = C_1 \cup C_2$ for some proper closed subsets~$C_1, C_2 \subsetneq X$.
    \item
      The space~$X$ is \emph{irreducible} if it is nonempty and not reducible.
  \end{enumerate}
\end{definition}


\begin{lemma}
  For a nonempty topological space~$X$ the following conditions are equivalent:
  \begin{enumerate}
    \item
      The space~$X$ is irreducible.
    \item
      Every two nonempty open subsets of~$X$ intersect nontrivially.
    \item
      Every nonemtpy open subset of~$X$ is dense.
    \qed
  \end{enumerate}
\end{lemma}


\begin{lemma}
  \label{irreducible is connected}
  Every irreducible space is connected.
  \qed
\end{lemma}


\begin{example}
  The affine set~$\vset(xy) \subseteq \Aff^2$ is connected but reducible, which shows that the converse to \cref{irreducible is connected} does not hold.
\end{example}


\begin{proposition}
  \label{existence of irreducible components}
  For every topological space~$X$ there exist a unique collection~$( C_\lambda )_{\lambda \in \Lambda}$ of closed irreducible subsets~$C_\lambda \subseteq X$ with~$X = \bigcup_{\lambda \in \Lambda} C_\lambda$ and~$C_\lambda \nsubseteq C_\mu$ for~$\lambda \neq \mu$.
  \qed
\end{proposition}


\begin{definition}
  The sets~$C_\lambda$,~$\lambda \in \Lambda$ from \cref{existence of irreducible components} are the \emph{irreducible components} of~$X$.
\end{definition}


\begin{definition}
  A topological space~$X$ is \emph{noetherian} if every descending sequence
  \[
              C_1
    \supseteq C_2
    \supseteq C_3
    \supseteq \dotsb
  \]
  of closed subsets~$C_i \subseteq X$ stabilizes, or equivalently if every ascending sequence
  \[
              U_1
    \subseteq U_2
    \subseteq U_3
    \subseteq \dotsb
  \]
  of open subsets~$U_i \subseteq X$ stabilizes.
\end{definition}


\begin{lemma}
  Subspaces of noetherian topological spaces are again noetherian.
  \qed
\end{lemma}


\begin{lemma}
  Any affine set is noetherian.
  \qed
\end{lemma}


\begin{lemma}
  A noetherian topological space has only finitely many irreducible components.
  \qed
\end{lemma}


\begin{corollary}
  An affine set has only finitely many irreducible components.
  \qed
\end{corollary}


\begin{theorem}[Hilbert’s~Nullstellensatz, version~3]
  \label{nullstellensatz 3}
  For every affine set~$X$, the maps~$\vset_X, \videal_X$ restrict to the following bijections:
  \[
    \begin{matrix}
        \left\{
          \begin{tabular}{@{}c@{}}
              affine  algebraic \\
              sets~$Y \subseteq X$
          \end{tabular}
        \right\}
      & \begin{tikzcd}[column sep = large]
            {}
            \arrow[shift left]{r}{\videal_X}
          & {}
            \arrow[shift left]{l}{\vset_X}
        \end{tikzcd}
      & \left\{
          \begin{tabular}{@{}c@{}}
            radical ideals \\
            $I \idealleq \coord(X)$
          \end{tabular}
        \right\}
      \\
        {}
      & {}
      & {}
      \\
        \rotatebox[origin=c]{90}{$\subseteq$}
      & {}
      & \rotatebox[origin=c]{90}{$\subseteq$}
      \\
        {}
      & {}
      & {}
      \\
        \left\{
          \begin{tabular}{@{}c@{}}
              irreducible affine \\
              algebraic set \\
              $Y \subseteq X$
          \end{tabular}
        \right\}
      & \begin{tikzcd}[column sep = large]
            {}
            \arrow[shift left]{r}{\videal_X}
          & {}
            \arrow[shift left]{l}{\vset_X}
        \end{tikzcd}
      & \left\{
          \begin{tabular}{@{}c@{}}
            prime ideals \\
            $\mf{p} \idealleq \coord(X)$
          \end{tabular}
        \right\}
      \\
        {}
      & {}
      & {}
      \\
        \rotatebox[origin=c]{90}{$\subseteq$}
      & {}
      & \rotatebox[origin=c]{90}{$\subseteq$}
      \\
        {}
      & {}
      & {}
      \\
        \left\{
          \begin{tabular}{@{}c@{}}
            points~$p \in X$
          \end{tabular}
        \right\}
      & \begin{tikzcd}[column sep = large]
            {}
            \arrow[shift left]{r}{\videal_X}
          & {}
            \arrow[shift left]{l}{\vset_X}
        \end{tikzcd}
      & \left\{
          \begin{tabular}{@{}c@{}}
            maximal ideals \\
            $\mf{m} \idealleq \coord(X)$
          \end{tabular}
        \right\}
    \end{matrix}
  \]
  For every point~$p = (p_1, \dotsc, p_n) \in X$ the corresponding maximal ideal~$\mf{m}_p \idealleq \coord(X)$ is given by~$\mf{m}_p = (\class{x_1} - p_1, \dotsc, \class{x_n} - p_n)$.
  \qed
\end{theorem}


\begin{corollary}
  \label{containment of D}
  If~$X$ is an affine set then it holds for all~$f, g \in \coord(X)$ that~$\Dopen(f) \subseteq \Dopen(g)$ if and only if~$f \in \rad{\genideal{g}}$.
\end{corollary}


\begin{proof}
  It holds that
  \[
          \Dopen(f) \subseteq \Dopen(g)
    \iff  \vset(f) \supseteq \vset(g)
    \iff  \videal(\vset(f)) \subseteq \videal(\vset(g))
    \iff  \rad{\genideal{f}} \subseteq \rad{\genideal{g}}
    \iff  f \in \rad{\genideal{g}} \,,
  \]
  as desired.
\end{proof}





\subsection{Morphisms of Affine Sets}


\begin{definition}
  \label{regular for affine}
  Let~$X,Y$ be affine sets with~$Y \subseteq \Aff^m$.
  \begin{enumerate}
    \item
      A function~$f \colon X \to k = \Aff^1$ is \emph{regular} if it is an element of~$\coord(X)$.
    \item
      A map~$f \colon X \to \Aff^n$ is \emph{regular} if it is regular in each coordinate.
    \item
      A map~$f \colon X \to Y$ is \emph{regular} if it is the restriction of a regular map~$X \to \Aff^m$.
  \end{enumerate}
  A map~$X \to Y$ is a \emph{morphism} of affine sets if it is regular.
  The set of morphisms~$X \to Y$ is denoted by~$\Mor(X,Y)$.
\end{definition}


\begin{lemma}
  Let~$X, Y, Z$ be affine sets.
  \begin{enumerate}
    \item
      The identity map~$\id_X \colon X \to X$ is a morphism.
    \item
      For every two morphisms~$f \colon X \to Y$ and~$g \colon Y \to Z$ their composition~$g \circ f \colon X \to Z$ is again morphism.
    \qed
  \end{enumerate}
\end{lemma}


\begin{lemma}
  Let~$X,Y$ be affine sets and let~$f \colon X \to Y$ be a morphism of affine sets.
  \begin{enumerate}
    \item
      It holds for every~$\varphi \in \coord(Y)$ that~$f^{-1}(\Dopen_Y(\varphi)) = \Dopen_X(\varphi \circ f)$.
    \item
      The map~$f$ is continuous with respect to the Zariski topologies on~$X, Y$.
    \qed
  \end{enumerate}
\end{lemma}


\begin{lemma}
  \label{fuctoriality of the coordinate ring}
  Let~$X, Y, Z$ be affine sets.
  \begin{enumerate}
    \item
      If~$f \colon X \to Y$ is a morphism of affine sets then the map
      \[
                f^*
        \colon  \coord(Y)
        \to     \coord(X) \,,
        \quad   \varphi
        \mapsto \varphi \circ f
      \]
      is a well-defined homomorphism of~\dash{$k$}{algebras}.
    \item
      It holds that~$\id_X^* = \id_{\coord(X)}$.
    \item
      It holds for any two composable morphisms of affine sets~$f \colon X \to Y$,~$g \colon Y \to Z$ that~$(g \circ f)^* = f^* \circ g^*$.
    \qed
  \end{enumerate}
\end{lemma}


\begin{fluff}[Finite sets as affine sets]
  If~$X$ is a finite affine set then every function~$X \to k$ is regular.
  It follows that for every affine set~$Y$ every map~$X \to Y$ is regular.
  If~$X'$ is another finite affine set with~$\card{X} = \card{X'}$ then it follows that every bijection~$X \to X'$ is already an isomorphism of affine sets.


  This shows that any two affine sets of the same cardinality are isomorphic as affine sets.
  This allows us to regard every finite set as an affine set by identifying it with an (up to isomorphicsm unique) affine set of suitable cardinality.
\end{fluff}


\begin{lemma}
  Let~$X$,~$Y$ be affine sets and let~$f \colon X \to Y$ be a morphism of affine sets with image~$X' \defined \im(f)$.
  The induced morphism~$f^*$ is injective if and only if the image~$X'$ is dense in~$Y$.
\end{lemma}


\begin{proof}
  \leavevmode
  It holds that
  \begin{align*}
        &{} \text{$f^*$ in injective} \\
    \iff&{} \text{it follows for all~$\varphi \in \coord(G)$ from~$f^*(\varphi) = 0$ that~$\varphi = 0$} \\
    \iff&{} \text{it follows for all~$\varphi \in \coord(G)$ from~$\varphi \circ f = 0$ that~$\varphi = 0$} \\
    \iff&{} \text{it follows for all~$\varphi \in \coord(G)$ from~$\restrict{\varphi}{X'} = 0$ that~$\varphi = 0$} \\
    \iff&{} \text{$X'$ is dense in~$Y$}
  \end{align*}
  by \cref{characterization of zariski dense}.
\end{proof}



\begin{proposition}
  \label{coordinate ring is fully faithful}
  For any two affine sets~$X,Y$ the map
  \[
            \Mor(X, Y)
    \to     \Hom_{\cAlg{k}}( \coord(Y), \coord(X) ) \,,
    \quad   f
    \mapsto f^*
  \]
  is a well-defined bijection.
\end{proposition}


\begin{proof}
  We prove the claim by constructing an inverse to~$(-)^*$.
  
  With~$X \subseteq \Aff^n$ and~$Y \subseteq \Aff^m$ the coordinate rings~$\coord(X)$ and~$\coord(Y)$ are given by
  \[
      \coord(X)
    = k[x_1, \dotsc, x_n]/{\videal(X)}
    \quad\text{and}\quad
      \coord(Y)
    = k[y_1, \dotsc, y_m]/{\videal(Y)} \,.
  \]
  For any homomorphism of~\dash{$k$}{algebras}~$F \colon \coord(Y) \to \coord(X)$ we associate a morphism of affine sets~$\tilde{F}^\circ \colon X \to \Aff^m$ with coordinates~$\tilde{F}^\circ = (\tilde{F}^\circ_1, \dotsc, \tilde{F}^\circ_m)$ given by
  \[
        \tilde{F}^\circ_j
    =   F(\class{y_j})
    \in \coord(X)
  \]
  for every~$j = 1, \dotsc, m$.
  
  The morphism~$\tilde{F}^\circ \colon X \to \Aff^m$ restrict to a morphism~$F^\circ \colon X \to Y$:
  The affine set~$Y$ is given by~$Y = \vset(\videal(Y))$ so needs to be shown that~$p( \tilde{F}^\circ(x) ) = 0$ for all~$p \in \videal(Y)$,~$x \in X$.
  For this we calculate
  \begin{align}
        p(\tilde{F}^\circ(x))
    &=  p( \tilde{F}^\circ_1(x), \dotsc, \tilde{F}^\circ_m(x) )
        \label{equation: definiton of F circ} \\
    &=  p( F(\class{y_1})(x), \dotsc, F(\class{y_m})(x) )
        \label{equation: definiton of F circ j} \\
    &=  p( F(\class{y_1}), \dotsc, F(\class{y_m}) )(x)
        \label{equation: pulling x out} \\
    &=  F( p(\class{y_1}, \dotsc, \class{y_m}) )(x)
        \label{equation: pulling F out} \\
    &=  F\left( \class{p(y_1, \dotsc, y_m)} \right)(x)
        \label{equation: putting p in}\\
    &=  F(\class{p})(x)
        \nonumber \\
    &=  F(0)(x)
        \label{equation: p vanishes}  \\
    &=  0
        \nonumber \,.
  \end{align}
  \cref{equation: definiton of F circ} uses the definition of~$\tilde{F}^\circ$, \cref{equation: definiton of F circ j} uses the definiton of the components~$\tilde{F}^\circ_j$, \cref{equation: pulling x out} uses that the~\dash{$k$}{algebra} structure on~$\coord(X)$ is given pointwise, \cref{equation: pulling F out} uses that~$F$ is a~\dash{$k$}{algebra} homomorphism, \cref{equation: putting p in} uses that~$\class{(-)}$ is a~\dash{$k$}{algebra} homomorphism, and \cref{equation: p vanishes} uses that~$p \in \videal(Y)$.
  
  The constructions~$(-)^*$ and~$(-)^\circ$ are mutually inverse:
  If~$f \colon X \to Y$ is a morphism of affine sets with coordinates~$f = (f_1, \dotsc, f_m)$ then
  \[
      (f^*)^\circ_j
    = (f^*)(\class{y_j})
    = \class{y_j} \circ f
    = f_j
  \]
  for every~$j = 1, \dotsc, m$ and therefore~$(f^*)^\circ = f$.
  If~$F \colon \coord(Y) \to \coord(X)$ is a homomorphism of~\dash{$k$}{algebras} then
  \[
      (F^\circ)^*(\class{y_j})
    = \class{y_j} \circ F^\circ
    = F^\circ_j
    = F(\class{y_j})
  \]
  for every~$j = 1, \dotsc, m$ and therefore~$(F^\circ)^* = F$.
\end{proof}


\begin{lemma}
  \label{coordinate ring is dense}
  For every finitely generated, commutative, reduced~\dash{$k$}{algebra}~$A$ there exists an affine set~$X$ with~$A \cong \coord(X)$ as~\dash{$k$}{algebras}.
\end{lemma}


\begin{proof}
  Let~$a_1, \dotsc, a_n \in A$ be generating set of~$A$ as a~\dash{$k$}{algebra}.
  Then there exists a unique homomorphisms of~\dash{$k$}{algebras}~$f \colon k[x_1, \dotsc, x_n] \to A$ with~$f(x_i) = a_i$ for every~$i = 1, \dotsc, n$, and~$f$ is surjective.
  It follows that~$f$ induces an isomorphism of~\dash{$k$}{algebras}~$k[x_1, \dotsc, x_n]/I \to A$ for~$I \defined \ker(f)$.
  
  The ideal~$I$ is a radical ideal because the quotient~$k[x_1, \dotsc, x_n]/I \cong A$ is reduced.
  It follows from the \hyperref[nullstellensatz 3]{second version of Hilbert’s~Nullstellensatz} that~$\videal(X) = I$ for the affine set~$X \defined \vset(I)$.
  It follows that
  \[
          A
    \cong k[x_1, \dots, x_n]/I
    =     k[x_1, \dots, x_n]/{\videal(X)}
    =     \coord(X)
  \]
  as desired.
\end{proof}


\begin{corollary}
\label{equivalence for affine sets}
  The coordinate ring~$\coord(-)$ gives rise to a contravariant equivalence
  \begin{align*}
    \{
      \text{affine sets}
    \}
    &\longto
    \left\{
      \begin{tabular}{@{}c@{}}
        finitely generated, \\
        commutative,        \\
        reduced~\dash{$k$}{algebras}
      \end{tabular}
    \right\} \,,
    \\
    X
    &\longmapsto
    \coord(X) \,,
    \\
    f
    &\longmapsto
    f^* \,.
  \end{align*}
\end{corollary}


\begin{proof}
  It follows from \cref{coordinate ring is fg commutative reduced} and \cref{fuctoriality of the coordinate ring} that~$\coord(-)$ defines a functor as claimed.
  It follows from \cref{coordinate ring is fully faithful} that~$\coord(-)$ is fully faithful and it follows from \cref{coordinate ring is dense} that~$\coord(-)$ is dense.
\end{proof}


\begin{corollary}
  \label{induced is isomorphism or surjective}
  Let~$X$,~$Y$ be affine sets
  \begin{enumerate}
    \item
      \label{affine sets isomorphic iff coordinate rings isomorphic}
      The affine sets~$X, Y$ are isomorphic if and only if their coordinate rings~$\coord(X)$,~$\coord(Y)$ are.
  \end{enumerate}
  Let~$f \colon X \to Y$ be a morphism of affine sets with image~$X' \defined \im(f)$.
  \begin{enumerate}[resume]
    \item
      \label{isomorphism iff induced isomorphism}
      The morphism~$f$ is an isomorphism if and only if the induced algebra homomorphism~$f^*$ is an isomorphism.
    \item
      \label{induced surjective iff closed embedding}
      The induced map~$f^*$ is surjective if and only if~$X'$ is closed in~$Y$ and~$f$ is an isomorphism onto~$X'$.% make footnote not notice this linebreak
      \footnote{The author linkes to think about~$f$ as a closed embedding, but is not sure if this is how algebraic geometers use this term.}
  \end{enumerate}
\end{corollary}


\begin{proof}
  Parts~\ref*{affine sets isomorphic iff coordinate rings isomorphic} and~\ref*{isomorphism iff induced isomorphism} follows from \cref{equivalence for affine sets}.
  
  To show part~\ref*{induced surjective iff closed embedding} first suppose that~$X'$ is closed in~$Y \subseteq \Aff^m$ and that~$f$ restricts to an isomorphism~$X \to X'$.
  To show that~$f^*$ surjective we may assume that~$X = X' \subseteq Y$ and that~$f$ is the inclusion~$f \colon X \inclusion Y$.
  The induced algebra homomorphism~$f \colon \coord(Y) \to \coord(X)$ maps every~$\varphi \in \coord(Y)$ to~$\varphi \circ f$, which is the restriction of~$\varphi$ to~$X$.
  The homomorphism~$f^*$ is therefore surjective because every regular function on~$X$ is the restriction of a regular function on~$\Aff^m$, and therefore also of a regular function on~$Y$.
  
  Suppose now that~$f^*$ is surjective.
  The ideal~$I \defined \ker(f^*)$ is radical because the quotient~$\coord(Y)/I \cong \coord(X)$ is reduced.
  It follows from \hyperref[nullstellensatz 3]{Hilbert’s Nullstellensatz} that~$X'' \defined \vset(I)$ is an affine set~$X'' \subseteq Y$ with~$\coord(X'') = \coord(Y)/I \cong \coord(X)$.
  We show that~$X' = X''$ and that~$f$ restricts to an isomorphism~$X \to X'$:
  
  That~$0 = f^*(\varphi) = \varphi \circ f$ for every~$\varphi \in I$ means that
  \[
              X'
    =         \im(f)
    \subseteq \vset(I)
    =         X''
  \]
  It follows that~$f$ restricts to a morphism of affine varieties~$\tilde{f} \colon X \to X''$ which fits in the following commutative diagram:
  \[
    \begin{tikzcd}[column sep = large]
        {}
      & Y
      \\
        X
        \arrow{ru}[above left]{f}
        \arrow{r}[below]{\tilde{f}}
      & X''
        \arrow[hook]{u}
    \end{tikzcd}
  \]
  This induces on coordinate rings the following commutative diagram:
  \[
    \begin{tikzcd}[column sep = large]
        {}
      & \coord(Y)
        \arrow{dl}[above left]{f^*}
        \arrow{d}
      \\
        \coord(X)
      & \coord(X'')
        \arrow{l}[below]{\tilde{f}^*}
    \end{tikzcd}
  \]
  The homomorphism~$\coord(Y) \to \coord(X'')$ is the restriction homomorphism~$\varphi \mapsto \restrict{\varphi}{X''}$, which is by the above observations surjective with kernel~$\videal(X'') = \videal(\vset(I)) = I$.
  
  Both~$f^*$ and the restriction homomorphism~$\coord(Y) \to \coord(X'')$ are surjective algebra homomorphisms with the same kernel so it follows that there exists a unique algebra homomorphism~$\coord(X'') \to \coord(X)$ which makes the above diagram commute, and that it is an isomorphism.
  This shows that~$\tilde{f}^*$ is an isomorphism.
  It follows from part~\ref*{isomorphism iff induced isomorphism} that~$\tilde{f}$ is an isomorphism from~$X$ to~$X''$.
  The inclusion
  \[
              \im(f)
    =         X'
    \subseteq X''
    =         \im(\tilde{f})
    =         \im(f)
  \]
  is therefore already an equality~$X' = X''$, and~$f$ restricts to the isomorphism~$\tilde{f}$.
\end{proof}





\subsection{Products of Affine Sets}


\begin{lemma}
  \label{product of affine sets is an affine set}
  For any two affine sets~$X \subseteq \Aff^n$ and~$Y \subseteq \Aff^m$ the set
  \[
              X \times Y
    \subseteq \Aff^n \times \Aff^m
    =         \Aff^{n+m}
  \]
  is again an affine set.
\end{lemma}


\begin{proof}
  We may label the coordinates of~$\Aff^n$ by~$x_1, \dotsc, x_n$ while labeling the coordinates of~$\Aff^m$ by~$x_{n+1}, \dotsc, x_{n+m}$.
  The affine set~$X$ is then cut out by an ideal~$I \idealleq k[x_1, \dotsc, x_n]$ while~$Y$ is cut out by an ideal~$J \idealleq k[x_{n+1}, \dotsc, x_{n+m}]$.
  The set~$X \times Y$ is then cut out by the generated ideal~$\genideal{I,J} \idealleq k[x_1, \dotsc, x_{n+m}]$.
\end{proof}


\begin{definition}
  For any two affine sets~$X \subseteq \Aff^n$,~$Y \subseteq \Aff^m$ the affine set~$X \times Y \subseteq \Aff^{n+m}$ is the \emph{product} of~$X$ and~$Y$.
\end{definition}


\begin{example}
  It holds that~$\Aff^n \times \Aff^m = \Aff^{n+m}$ as affine sets.
\end{example}


\begin{warning}
  \label{zariski finer than product topology}
  The Zariski topology on~$X \times Y$ is finer than the product topology (i.e.\ it has more open sets) and in general strictly so.
  
  To show that the Zariski topology on~$X \times Y$ is finer than the product topology it sufficies to consider the case~$X = \Aff^n$,~$Y = \Aff^m$ because both the Zariski topology and product topology on~$X \times Y$ are inherited from~$\Aff^n \times \Aff^m = \Aff^{n+m}$.
  It further sufficies to show that the sets~$U \times V$ for open subsets~$U \subseteq \Aff^n$,~$V \subseteq \Aff^m$ are open in the Zariski topology because these form a basis of the product topology.
  This holds because
  \[
      \Aff^{n+m} \setminus \, (U \times V)
    = \left( (\Aff^n \setminus U) \times \Aff^m \right)
      \cup
      \left( \Aff^n \times (\Aff^m \setminus V) \right)
  \]
  is Zariski closed by \cref{product of affine sets is an affine set}.
  
  To show that the Zariski toplogy on~$X \times Y$ is in general strictly finer than the product topology we consider the case~$X = Y = \Aff^1$.
  The diagonal
  \[
              \Delta
    =         \{(x,x) \suchthat x \in \Aff^1\}
    =         V(x_1 - x_2)
    \subseteq \Aff^2
  \]
  is then Zariski closed.
  But~$\Delta$ cannot be closed in the product topology because~$\Aff^1$ is not Hausdorff\footnote{Here we use the well-known fact from point set topology that a toplogical space~$X$ is Hausdorff if and only if the diagonal~$\Delta = \{(x,x) \suchthat x \in X\}$ is a closed subset of~$X \times X$.}, as it is an infinite set endowed with the cofinite topology.
\end{warning}


\begin{proposition}
  Let~$X, X_1, X_2, Y_1, Y_2$ be affine sets.
  \begin{enumerate}
    \item
      The projections~$\pi_i \colon X_1 \times X_2 \to X_i$ are morphisms of affine sets.
    \item
      A map~$f \colon X \to Y_1 \times Y_2$ given by~$f = (f_1, f_2)$ with~$f_i \colon X \to Y_i$ is a morphism of affine sets if and only if both~$f_1, f_2$ are morphisms of affine sets.
  \end{enumerate}
  This shows that the product of two affine sets is their categorical product in the category of affine sets.
  \begin{enumerate}[resume]
    \item
      If~$f \colon X \to X'$ and~$g \colon Y \to Y'$ are two morphisms of affine sets then the induced map~$f \times g \colon X \times Y \to X' \times Y'$ is again a morphism of affine sets.
    \qed
  \end{enumerate}
\end{proposition}


\begin{proposition}
  \label{coordinate ring of product of affine sets}
  For any two affine sets~$X,Y$ the map
  \[
            \coord(X) \tensor_k \coord(Y)
    \to     \coord(X \times Y) \,,
    \quad   f \tensor g
    \mapsto \bigl[ (x,y) \mapsto f(x)g(y) \bigr]
  \]
  is a well-defined natural isomorphism of~\dash{$k$}{algebras}.
  \qed
\end{proposition}








